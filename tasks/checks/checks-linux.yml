---
# CPU Checks
- name: Check CPU
  command: sensuctl check create check-cpu \
          --command 'check-cpu.rb -w 75 -c 90' \
          --interval 60 \
          --subscriptions linux \
          --runtime-assets sensu-plugins-cpu-checks,sensu-ruby-runtime
  run_once: true
  ignore_errors: true
  changed_when: false

- name: Check metrics-cpu-mpstat
  command: sensuctl check create metrics-cpu-mpstat \
          --command metrics-cpu-mpstat.rb \
          --interval 60 \
          --subscriptions linux \
          --runtime-assets sensu-plugins-cpu-checks,sensu-ruby-runtime
  run_once: true
  ignore_errors: true
  changed_when: false

- name: Check metrics-cpu-pcnt-usage
  command: sensuctl check create metrics-cpu-pcnt-usage \
          --command metrics-cpu-pcnt-usage.rb \
          --interval 60 \
          --subscriptions linux \
          --runtime-assets sensu-plugins-cpu-checks,sensu-ruby-runtime
  run_once: true
  ignore_errors: true
  changed_when: false

- name: Check metrics-numastat
  command: sensuctl check create metrics-numastat \
          --command metrics-numastat.rb \
          --interval 60 \
          --subscriptions linux \
          --runtime-assets sensu-plugins-cpu-checks,sensu-ruby-runtime
  run_once: true
  ignore_errors: true
  changed_when: false

- name: Check metrics-user-pct-usage
  command: sensuctl check create metrics-user-pct-usage \
          --command metrics-user-pct-usage.rb \
          --interval 60 \
          --subscriptions linux \
          --runtime-assets sensu-plugins-cpu-checks,sensu-ruby-runtime
  run_once: true
  ignore_errors: true
  changed_when: false
